<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Agence Immobili√®re - Dashboard</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- CSS personnalis√© -->
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

  <div class="d-flex">

    <!-- SIDEBAR -->
    <nav class="sidebar bg-dark text-white p-3">
      <h4 class="text-center mb-4">üè† MyAgency</h4>

      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link text-white" href="index.html">
            <i class="fa fa-chart-line me-2"></i> Dashboard
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="biens.html">
            <i class="fa fa-house me-2"></i> Biens
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="agents.html">
            <i class="fa fa-user-tie me-2"></i> Agents
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="clients.html">
            <i class="fa fa-users me-2"></i> Clients
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="visites.html">
            <i class="fa fa-calendar-check me-2"></i> Visites
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="contrats.html">
            <i class="fa fa-file-contract me-2"></i> Contrats
          </a>
        </li>
      </ul>
    </nav>

    <!-- CONTENU PRINCIPAL -->
    <div class="flex-grow-1">

      <!-- HEADER -->
      <header class="bg-light p-3 border-bottom d-flex justify-content-between">
        <h5 class="mb-0">Dashboard</h5>
        <span>Admin</span>
      </header>

      <!-- CONTENU -->
      <main class="p-4">

        <!-- FILTRES -->
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="mb-3"><i class="fa fa-filter me-2"></i>Filtres</h5>

            <div class="row g-3">
              <div class="col-md-3">
                <label class="form-label">Type de contrat</label>
                <select id="filterTypeContrat" class="form-select">
                  <option value="">Tous</option>
                  <option value="vente">Vente</option>
                  <option value="location">Location</option>
                </select>
              </div>

              <div class="col-md-3">
                <label class="form-label">Statut du bien</label>
                <select id="filterStatutBien" class="form-select">
                  <option value="">Tous</option>
                  <option value="disponible">Disponible</option>
                  <option value="vendu">Vendu</option>
                  <option value="lou√©">Lou√©</option>
                </select>
              </div>

              <div class="col-md-3">
                <label class="form-label">Agent</label>
                <select id="filterAgent" class="form-select">
                  <option value="">Tous</option>
                </select>
              </div>

              <div class="col-md-3">
                <label class="form-label">P√©riode (contrats)</label>
                <div class="d-flex gap-2">
                  <input id="filterDateFrom" type="date" class="form-control" />
                  <input id="filterDateTo" type="date" class="form-control" />
                </div>
              </div>

              <div class="col-12 d-flex gap-2">
                <button id="btnApply" class="btn btn-primary">
                  <i class="fa fa-check me-2"></i>Appliquer
                </button>
                <button id="btnReset" class="btn btn-outline-secondary">
                  <i class="fa fa-rotate-left me-2"></i>R√©initialiser
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- KPI CARDS -->
        <div class="row g-3 mb-4">
          <div class="col-md-3">
            <div class="card shadow-sm">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <div class="text-muted">Agents</div>
                  <div class="h4 mb-0" id="kpiAgents">0</div>
                </div>
                <i class="fa fa-user-tie fa-2x text-secondary"></i>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="card shadow-sm">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <div class="text-muted">Clients</div>
                  <div class="h4 mb-0" id="kpiClients">0</div>
                </div>
                <i class="fa fa-users fa-2x text-secondary"></i>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="card shadow-sm">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <div class="text-muted">Biens (filtr√©s)</div>
                  <div class="h4 mb-0" id="kpiBiens">0</div>
                </div>
                <i class="fa fa-house fa-2x text-secondary"></i>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="card shadow-sm">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <div class="text-muted">Contrats (filtr√©s)</div>
                  <div class="h4 mb-0" id="kpiContrats">0</div>
                </div>
                <i class="fa fa-file-contract fa-2x text-secondary"></i>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card shadow-sm">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <div class="text-muted">Chiffre d‚Äôaffaires (filtr√©)</div>
                  <div class="h4 mb-0" id="kpiCA">0 DH</div>
                </div>
                <i class="fa fa-coins fa-2x text-secondary"></i>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card shadow-sm">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <div class="text-muted">Visites √† venir</div>
                  <div class="h4 mb-0" id="kpiVisites">0</div>
                </div>
                <i class="fa fa-calendar-check fa-2x text-secondary"></i>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card shadow-sm">
              <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                  <div class="text-muted">Biens disponibles</div>
                  <div class="h4 mb-0" id="kpiDispo">0</div>
                </div>
                <i class="fa fa-circle-check fa-2x text-secondary"></i>
              </div>
            </div>
          </div>
        </div>

        <!-- GRAPHIQUE -->
        <div class="card shadow-sm">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h5 class="mb-0"><i class="fa fa-chart-column me-2"></i>Contrats par mois</h5>
              <small class="text-muted">Bas√© sur les contrats filtr√©s</small>
            </div>
            <div style="height: 340px;">
              <canvas id="chartContrats"></canvas>
            </div>
          </div>
        </div>

      </main>
    </div>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- Dashboard scripts -->
  <script src="../js/dashboard_api.js"></script>
  <script src="../js/dashboard.js"></script>

</body>
</html>
